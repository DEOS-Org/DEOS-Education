<div class="page-container">
  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="loading-content">
      <mat-spinner diameter="60" color="primary"></mat-spinner>
      <p>Cargando datos académicos...</p>
    </div>
  </div>

  <!-- Main View: Lista de Cursos -->
  <div *ngIf="!isLoading && !selectedCurso" class="cursos-view">
    <div class="page-header">
      <h1>
        <mat-icon>school</mat-icon>
        Gestión Académica
      </h1>
      <p>Selecciona un curso para ver sus divisiones y gestionar el contenido académico</p>
    </div>

    <!-- Cursos Grid -->
    <div class="content-card">
      <h2>
        <mat-icon>class</mat-icon>
        Cursos Disponibles
      </h2>
      <div class="cursos-grid">
        <div *ngFor="let curso of cursos; let i = index" 
             class="curso-item"
             (click)="selectCurso(curso)">
          <mat-card class="curso-card" [class]="'curso-card-' + getCursoColor(i)">
            <mat-card-content>
              <div class="curso-icon">
                <mat-icon>class</mat-icon>
              </div>
              <h3>{{ curso.nombre }}</h3>
              <p>Nivel {{ curso.nivel }}</p>
              <div class="curso-stats">
                <div class="stat-item">
                  <mat-icon>group</mat-icon>
                  <span>{{ curso.divisiones || 0 }} División(es)</span>
                </div>
              </div>
              <button class="action-button">
                <mat-icon>arrow_forward</mat-icon>
                Ver Divisiones
              </button>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>

  <!-- Division View: Lista de Divisiones del Curso Seleccionado -->
  <div *ngIf="!isLoading && selectedCurso" class="divisiones-view">
    <div class="page-header">
      <div class="header-with-back">
        <button mat-icon-button (click)="backToMain()" class="back-button">
          <mat-icon>arrow_back</mat-icon>
        </button>
        <div class="header-content">
          <h1>
            <mat-icon>class</mat-icon>
            {{ selectedCurso.nombre }} - Divisiones
          </h1>
          <p>Selecciona una división para ver estudiantes, profesores y asistencia</p>
        </div>
      </div>
    </div>

    <div class="content-card" *ngIf="divisionesDelCurso.length > 0">
      <h2>
        <mat-icon>group</mat-icon>
        Divisiones del {{ selectedCurso.nombre }}
      </h2>
      <div class="divisiones-grid">
        <div *ngFor="let division of divisionesDelCurso; let i = index"
             class="division-item"
             (click)="openCursoDivisionDetails(division)">
          <mat-card class="division-card">
            <mat-card-content>
              <div class="division-icon">
                <mat-icon>group</mat-icon>
              </div>
              <h3>División {{ division.nombre }}</h3>
              <p>{{ selectedCurso.nombre }}</p>
              <div class="division-stats">
                <div class="stat-item">
                  <mat-icon>people</mat-icon>
                  <span>{{ division.estudiantes || 0 }} Estudiantes</span>
                </div>
                <div class="stat-item">
                  <mat-icon>person</mat-icon>
                  <span>{{ division.profesores || 0 }} Profesores</span>
                </div>
                <div class="stat-item">
                  <mat-icon>book</mat-icon>
                  <span>{{ division.materias || 0 }} Materias</span>
                </div>
              </div>
              <button class="action-button">
                <mat-icon>visibility</mat-icon>
                Ver Detalles
              </button>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>

    <div *ngIf="divisionesDelCurso.length === 0" class="content-card">
      <div class="error-state">
        <mat-icon>info</mat-icon>
        <h3>No hay divisiones</h3>
        <p>Este curso no tiene divisiones asignadas.</p>
      </div>
    </div>
  </div>
</div>
